<!DOCTYPE html>
<html>
  <head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Checkout</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="public/files/style.css">
<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet"> 

<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
<script type="text/javascript" src="https://js.stripe.com/v3/"></script>



</head>
<header class="header black-bg-1 col-xs-12">
<nav class="navbar navbar-default">


<a class="navbar-brand" href="https://taskdrive.com/">
<img src="https://taskdrive.com/wp-content/themes/AKD/assets/images/logo.png" alt="">
</a>
<ul id = "menu" class="nav medium-font pull-right navbar-nav">
	<li class="menu-item"><a href="https://taskdrive.com/">Home</a></li>
	<li class="menu-item"><a href="https://taskdrive.com/how-it-works">How it works</a></li>
	<li class="menu-item"><a href="https://taskdrive.com/priving">Pricing</a></li>
	<li class="menu-item"><a href="https://taskdrive.com/Contact us">Contact us</a></li>
	</ul>

</nav>
</header>
  	<body>
			<div class="sub-bannercon col-xs-12 black-bg-2">
<section class="container">
<div class="row">
<div class="subbanner white-color text-center col-xs-12 ">
<div class="v-align">
<h1 class="main-heading">Select a Product or Plan</h1>
<p>And let our Sales Assistants find leads for you!</p>
</div>
</div>
</div>
</section>
</div>

		<!-- form -->
		<form method="post" action="/charge" class="round form validateForm uniformForm checkout-form" id="payment-form">
		<div id="main-container" class="container ">
							
				<div class="row">
				<div class="col-sm-12 inner-smallbox inner-smallbox2 col-xs-12 green-shadow2 white-bg no-Margin">
					<div class="errorMessage">
						<p>Oops! {{ error }} </p>
						</div>
						<div class="panel1">
							<div class="testit">
							<div class="column1">
							<label>Product / Plan</label>
							</div>
						<div class="column2">
							<label>Price</label>
							</div>
						</div>
							<div class="panel-body">
								<div class="form-group">
								<div class="productdescription option1">
								<div class="column1 blue-bg">
									<h5><b><input type="radio" name="option" value="customleads" class="25customleads" required><span class="25customleads">  25 Custom Leads</span></b> $5, one time charge</h5>
									
									<br>
								</div>
								
								<div class="column2 green-bg" >
								
								</div>
								</div>
								
								<div class="productdescription option2">
								<div class="column1 blue-bg">
									<h5><b><input type="radio" name="option" value="1trialweek" class="trialweek" required><span class="trialweek">  1 week Trial</span></b> $380, one time charge</h5>
								</div>
								
								<div class="column2 green-bg" >
								
								</div>
								</div>
								
								
								<div class="productdescription option3">
								
								<div class="column1 blue-bg">
									 <h5><b><input type="radio" name="option" value="Fresearcher" class="fulltimeresearcher" required><span class="fulltimeresearcher">  Full-Time Researcher</span></b> $380, <br> (40h / week, charged weekly; 1st Researcher at $380, all additional Researchers at $280 per week)</h5>
								</div>
									
								
								<div class="column2 green-bg" >
								<div class="quantitysection col-sm-3">
									<label class="text-uppercase qty"><b>Quantity</b></label>
									<input name="fulltime" class="form-control validate" id="package_quantity" value="0" placeholder="0" >
								</div>
								<label class="text-uppercase price" ></label><span class="form-control">$</span><span name="total" id="totalsum" class="form-control" name="stripeAmount" ></span>
								</div>
								</div>
								
								
									
										<script>
											$(document).ready(function() {
												
											
											$('.25customleads').click(function(){
												var finalprice = 5;
												$('.option1 .column1').removeClass('grayedout');
												$('.option1 .column2').removeClass('grayedout');
												$('.option2 .column1').addClass('grayedout');
												$('.option2 .column2').addClass('grayedout');
												$('.option3 .column1').addClass('grayedout');
												$('.option3 .column2').addClass('grayedout');
												$('.option2 .column2').html(' ');
												$('.option1 .column2').html('<label class="text-uppercase price" ></label><span class="form-control">$</span><span name="total" id="totalsum" class="form-control" name="stripeAmount" ></span>');
												$('#totalsum').text(finalprice);
											});
											
											$('.trialweek').click(function(){
												var finalprice = 380;
												 
												 $('.option1 .column1').addClass('grayedout');
													$('.option1 .column2').addClass('grayedout');
												 $('.option2 .column1').removeClass('grayedout');
													$('.option2 .column2').removeClass('grayedout');
												 $('.option3 .column1').addClass('grayedout');
													$('.option3 .column2').addClass('grayedout');
												 $('.option1 .column2').html(' ');
												$('.option2 .column2').html('<label class="text-uppercase price" ></label><span class="form-control">$</span><span name="total" id="totalsum" class="form-control" name="stripeAmount" ></span>');
												$('#totalsum').text(finalprice);
											});
										
											$('.fulltimeresearcher').click(function(){
												$('.option1 .column1').addClass('grayedout');
												$('.option1 .column2').addClass('grayedout');
												$('.option2 .column1').addClass('grayedout');
											  $('.option2 .column2').addClass('grayedout');
												$('.option3 .column1').removeClass('grayedout');
												$('.option3 .column2').removeClass('grayedout');
												$('.option1 .column2').html(' ');
												$('.option2 .column2').html(' ');
											//	$('.option3 .column2').prepend('<div class="quantitysection col-sm-3"><label class="text-uppercase qty"><b>Quantity</b></label><input name="fulltime" class="form-control validate" id="package_quantity" value="0" ></div>');
											//	$('.option3 .column2').append('<label class="text-uppercase price" ></label><span name="total" id="totalsum" class="form-control" name="stripeAmount" ></span>');
											
											});
											
											$('#package_quantity').on('keyup', function(){
											$("input.fulltimeresearcher").prop("checked", true)
												var number = +$(this).val();
												var amount = 280;
												var finalprice = number*amount;
												if (number == 1){
												finalprice = 380}
												else if (number == 0){
												finalprice = 0}
												else {
												finalprice = 380 + (number-1)*280
												}
												return $('#totalsum').text(finalprice);
											});
											});	
											
										
										</script>
									
								
								</div>
							</div>
						</div>
						<div class="panel2">
							
						<div class="panel-body">
							<div class="form-group">
									<label class="text-uppercase" for="email">Email:</label>
									<input type="text" class="form-control" name="stripeEmail" id="email-address" placeholder="Email Address" data-validation="email">
									
							</div>
							<div class="paymethod">
								<div class="row">
									<div class="col-xs-12 col-md-8">
										<label class="text-uppercase" for="number">Credit Card Number:</label>
										<div id="card-number-element" class="field"></div>
									</div>
								</div>
								<div class="row">
									<div class="col-xs-12 col-md-4">
										<label class="text-uppercase" for="date">Expiry Date:</label>
											<div id="card-expiry-element" class="field"></div>
									</div>
									<div class="col-xs-12 col-md-3">
										<label class="text-uppercase" for="cvv">CVV:</label>
											 <div id="card-cvc-element" class="field"></div>
									</div>		 
								</div>
							</div>
								
								
							</div>
				</div>
				
				
				<!--info block-->
				
				<div class="row">
				<div class="col-sm-10">
							
						</div>
						</div> 
				
				
				
					
				<!-- order button -->
				<div class="row"><button type="submit" class="btn btn-success btn-lg btn-block green-btn text-uppercase" id="submit">ORDER NOW</button>
										<div id="card-errors" class="payment-errors" role="alert"></div><div class="col-sm-4"></div>
									<div class="col-sm-4">
										<!-- <button type="submit" class="text-uppercase btn btn-primary" tabindex="3" onclick="return _chargeover_process();">Sign Up Now</button> -->
										
										<p><img class="elIMG ximg" src="public/files/cards-image.png" width="100%" style="margin-top:20px;"> </p>
									</div>
									<div class="col-sm-2 loading">
									
									</div>
				</div>
				</div>	
				<input type="hidden" name="stripeToken" class="token">
				<input type="hidden" name="amount" class="amounttoken" value="">
				<input type="hidden" name="Plan" class="plan" value="">
				<input type="hidden" name="count" class="count" value="">
				<input type="hidden" name="subscrp" class="subscrp" value="">
				<input type="hidden" name="AdditSubscrp" class="AdditSubscrp" value="">
				
		</div> 
			</div>
		<script src="public/files/form-validator/jquery.form-validator.js"></script> 
<script src="public/files/form-validator/security.js"></script> 
<script>
  $.validate({
    modules : 'location, date, security, file'
    
  });
  $( "#payment-form" ).validate({
  rules: {
    fields: {
      required: true
    }

  }
});

</script>
					<!-- footer block -->
					<div class="row bottomsection" style="background: #fff;">
						<div class="">
							<div class="row guaranteesection" style="margin: 30px 13%;">
								<div class=" guarantee">	
									<div class="extraflex">  			
								<img class="elScreenshot_image_src1 ximg" src="public/files/gurantee-image.png" width="110px" height="auto">
								</div>
								<div class="elScreenshot_text" >
								<h3 class="semibold-font black-color"><b>Guarantee</b></h3>
								No question asked refund guaranteed. If you are unhappy for any reason, get your money back. Rock solid guarantee...
								
								</div>
								</div>
								
								<div class=" securepayment">
									<div class="extraflex"> 
								<img class="elScreenshot_image_src1 ximg" src="public/files/payment-image.png" width="auto" height="145px">
								</div>
								<div class="elScreenshot_text">
								<h3 class="semibold-font black-color"><b>Secure Payment</b></h3>
								All orders are through a very secure network. Your credit card information is never stored in any way. We respect your privacy...
								
								
								</div>
							</div>
							</div>
						</div>
				
					</div>
		</form>

	<div style="text-align: center; font-size:17px; font-weight: bold; padding-bottom:30px;" class="black-bg-2 white-color copyright text-center col-xs-12">Copyright © 2017 · <a id="link-2299-423" class="" href="mailto:hello@taskdrive.com" target="_parent">hello@taskdrive.com</a>· Made with ♡ in San Francisco & Spain</div>

	<script>

Stripe.setPublishableKey('pk_test_EuRj50XT5MsGJ3RUx1qvVPa6');
var stripe = Stripe('pk_test_EuRj50XT5MsGJ3RUx1qvVPa6');
var elements = stripe.elements();

var style = {
  base: {
    iconColor: '#666EE8',
    color: '#555',
    lineHeight: '45px',
    fontWeight: 100,
    fontFamily: '"Poppins",sans-serif',
		fontSize: '16px',
		borderRadius: '0',
	'::placeholder': {
     margin: '0 5px',
	 padding: '6px 12px',
    fontSize: '16px',
    color: '#999'
    },
  },
};

var cardNumberElement = elements.create('cardNumber', {
  style: style
});
cardNumberElement.mount('#card-number-element');

var cardExpiryElement = elements.create('cardExpiry', {
  style: style
});
cardExpiryElement.mount('#card-expiry-element');

var cardCvcElement = elements.create('cardCvc', {
  style: style
});
cardCvcElement.mount('#card-cvc-element');



function stripeTokenHandler(token) {
  // Insert the token ID into the form so it gets submitted to the server
  
  var fullresearcherlabel = $('.fulltimeresearcher').text();
  var trialweek = $('.trialweek').text();
  var customleadslabel = $('.25customleads').text();
  var dollar = +$('#totalsum').text();
  var finalAmount = dollar*100;
  var form = document.getElementById('payment-form');
  var hiddenInput = $(".token");
  var hiddenInputAmount = $(".amounttoken");
  var hiddenInputPlan = $(".plan");
  var hiddenInputCount = $(".count");
  var hiddenInputSubscr = $(".subscrp");
  var hiddenInputAdditSubscr = $('.AdditSubscrp');
  
    
  hiddenInput.attr('value', token.id);
  hiddenInputAmount.attr('value', finalAmount);

 
  if ($('input.trialweek').is(':checked')){
   hiddenInputPlan.attr('value',trialweek );
   hiddenInputCount.attr('value',1 );
   
  } else if ($('input.25customleads').is(':checked')){  
   hiddenInputPlan.attr('value', customleadslabel);
	hiddenInputCount.attr('value',1 );
  } else if ($('.fulltimeresearcher').is(':checked')){  
   hiddenInputPlan.attr('value', fullresearcherlabel);
	hiddenInputCount.attr('value',$('#package_quantity').val() );
		if($('#package_quantity').val() == 1){
		hiddenInputSubscr.attr('value',"research_1_std" );
		} else if ($('#package_quantity').val() > 1){
		hiddenInputSubscr.attr('value',"research_1_std" );
		hiddenInputAdditSubscr.attr('value',"researcher_2_std");
		}
	
  }
  
 
// Submit the form
	$.ajax('/charge',{
	type: 'POST',
	data: $('form').serialize(),
	success : function(data, status, jqXHR) {
                if (data.status === "Success") {
                    window.location = data.redirect
				} else {
					$('body').hide();
					$('body').html(data).fadeIn();
				}	
			
					},
	timeout: 5000,
	error: function(err) {
	$('.panel-default').hide();
	$('.logo').html(err).fadeIn();
	
	}
	}	);
	
}

function createToken() {
$('.loading').html('<img class="loader" src="public/files/ajax-loader.gif">');
  stripe.createToken(cardNumberElement).then(function(result) {
    if (result.error) {
      // Inform the user if there was an error
      var errorElement = document.getElementById('card-errors');
	  errorElement.textContent = result.error.message;
    } else {
      // Send the token to your server
      stripeTokenHandler(result.token);
    }
  });
};

// Create a token when the form is submitted.
var form = document.getElementById('payment-form');
form.addEventListener('submit', function(e) {
  e.preventDefault();
  createToken();
});

cardNumberElement.addEventListener('change', function(event) {
  var displayError = document.getElementById('card-errors');
  if (event.error) {
    displayError.textContent = event.error.message;
  } else {
    displayError.textContent = '';
  }
});

</script>


</body></html>